<script lang="ts">
  import { SquareArrowOutUpRight } from '@lucide/svelte';

  import { page } from '$app/state';
  import { LinkButton } from '$lib/components/Button/index.js';
  import { HOME_PATH } from '$lib/helpers/index.js';
</script>

<main class="flex min-h-svh flex-col">
  <div class="relative overflow-hidden">
    <div class="absolute bottom-0 -left-1/4 z-1 h-2/3 w-[150%] rounded-t-[50%] bg-orange-400"></div>

    <div class="relative z-10 mx-auto flex w-full max-w-5xl flex-col">
      <div class="flex justify-center px-4">
        <enhanced:img
          src="$lib/assets/login-splash.png?w=484.8"
          alt="Login splash"
          class="w-[242.4px]"
        />
      </div>

      <div class="flex flex-col gap-y-6 px-4 pb-5">
        <div class="flex flex-col gap-y-8">
          <span class="font-logo text-center text-3xl">Small Bites.<br />Big Growth.</span>

          <div class="flex flex-col items-center gap-y-4">
            <LinkButton
              href={`/auth/google?return_to=${encodeURIComponent(page.url.searchParams.get('return_to') || HOME_PATH)}`}
              data-sveltekit-reload
              variant="primary"
              width="full"
              class="max-w-sm gap-x-2"
            >
              {@render googleIcon()}
              <span class="font-medium">Continue with Google</span>
            </LinkButton>

            <span class="text-center text-xs">
              By continuing, you agree to our
              <span class="block">
                <a href="/terms" class="underline">Terms</a> and
                <a href="/privacy" class="underline">Privacy Policy</a>.
              </span>
            </span>

            <a
              href="https://go.gov.sg/report-vulnerability"
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-x-1 text-center text-xs underline"
            >
              Report Vulnerability
              <SquareArrowOutUpRight class="h-3 w-3" />
            </a>
          </div>
        </div>

        <div class="flex flex-col items-center">
          {@render dxdLogo()}
        </div>
      </div>
    </div>
  </div>

  <div class="flex-1 bg-orange-400"></div>
</main>

{#snippet dxdLogo()}
  <svg width="66" height="40" viewBox="0 0 66 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M59.7745 26.0566C58.8297 26.0566 57.9646 25.8237 57.1794 25.3579C56.3942 24.8921 55.7754 24.2666 55.3229 23.4815C54.8705 22.683 54.6442 21.7913 54.6442 20.8065C54.6442 19.8217 54.8705 18.9367 55.3229 18.1515C55.7887 17.3663 56.4142 16.7408 57.1994 16.275C57.9846 15.8092 58.8563 15.5763 59.8145 15.5763C60.3734 15.5763 60.9124 15.6629 61.4314 15.8359C61.9504 16.0089 62.4295 16.2617 62.8687 16.5944V11.9232L64.865 11.5439V25.8969H62.8887V24.9188C62.0236 25.6773 60.9856 26.0566 59.7745 26.0566ZM60.0341 24.3199C60.6196 24.3199 61.152 24.2134 61.6311 24.0005C62.1235 23.7875 62.536 23.4815 62.8687 23.0822V18.5108C62.536 18.1382 62.1235 17.8454 61.6311 17.6325C61.152 17.4062 60.6196 17.2931 60.0341 17.2931C59.3953 17.2931 58.8164 17.4462 58.2973 17.7523C57.7783 18.0583 57.3658 18.4776 57.0597 19.0099C56.7536 19.5289 56.6005 20.1211 56.6005 20.7865C56.6005 21.4519 56.7536 22.0508 57.0597 22.5832C57.3658 23.1155 57.7783 23.5413 58.2973 23.8607C58.8164 24.1668 59.3953 24.3199 60.0341 24.3199Z"
      fill="#020617"
    />
    <path
      d="M44.5496 25.8969L48.5022 20.6867L44.7093 15.736H47.0449L49.66 19.2095L52.2751 15.736H54.5308L50.7779 20.6667L54.7704 25.8969H52.4348L49.6201 22.144L46.8054 25.8969H44.5496Z"
      fill="#020617"
    />
    <path
      d="M38.2331 26.0566C37.2882 26.0566 36.4232 25.8237 35.638 25.3579C34.8528 24.8921 34.234 24.2666 33.7815 23.4815C33.329 22.683 33.1028 21.7913 33.1028 20.8065C33.1028 19.8217 33.329 18.9367 33.7815 18.1515C34.2473 17.3663 34.8728 16.7408 35.6579 16.275C36.4431 15.8092 37.3148 15.5763 38.273 15.5763C38.832 15.5763 39.3709 15.6629 39.89 15.8359C40.409 16.0089 40.8881 16.2617 41.3273 16.5944V11.9232L43.3235 11.5439V25.8969H41.3472V24.9188C40.4822 25.6773 39.4441 26.0566 38.2331 26.0566ZM38.4926 24.3199C39.0782 24.3199 39.6105 24.2134 40.0896 24.0005C40.582 23.7875 40.9946 23.4815 41.3273 23.0822V18.5108C40.9946 18.1382 40.582 17.8454 40.0896 17.6325C39.6105 17.4062 39.0782 17.2931 38.4926 17.2931C37.8538 17.2931 37.2749 17.4462 36.7559 17.7523C36.2368 18.0583 35.8243 18.4776 35.5182 19.0099C35.2121 19.5289 35.0591 20.1211 35.0591 20.7865C35.0591 21.4519 35.2121 22.0508 35.5182 22.5832C35.8243 23.1155 36.2368 23.5413 36.7559 23.8607C37.2749 24.1668 37.8538 24.3199 38.4926 24.3199Z"
      fill="#020617"
    />
    <path
      d="M65.0371 26.069H62.7166V25.2788C61.8779 25.9117 60.8956 26.2286 59.7746 26.2287C58.8 26.2287 57.9044 25.9881 57.0917 25.506C56.2813 25.0253 55.6412 24.3783 55.1739 23.5673L55.1732 23.5663C54.705 22.7401 54.4721 21.8188 54.4721 20.8065C54.4721 19.7942 54.7051 18.879 55.1739 18.0655L55.1749 18.0638C55.6554 17.2538 56.3016 16.6076 57.1116 16.1271C57.9247 15.6448 58.8271 15.4042 59.8146 15.4042C60.3916 15.4042 60.9488 15.4937 61.4857 15.6727C61.9161 15.8162 62.3196 16.0134 62.6968 16.2629V11.7809L65.0371 11.3362V26.069ZM56.6007 20.7867C56.6007 20.1629 56.735 19.6033 57.004 19.1081L57.0598 19.01C57.3468 18.5109 57.7272 18.1113 58.2012 17.8111L58.2974 17.7522C58.8164 17.4462 59.3953 17.2931 60.0341 17.2931L60.1433 17.2944C60.686 17.3077 61.1818 17.4205 61.6309 17.6326C62.1233 17.8455 62.5361 18.1382 62.8688 18.5108V23.0823C62.5361 23.4816 62.1233 23.7876 61.6309 24.0006L61.5405 24.0392C61.0852 24.2263 60.583 24.3199 60.0341 24.3199V24.1478C60.5983 24.1478 61.1064 24.0453 61.561 23.8433L61.5627 23.8426C62.0118 23.6484 62.3889 23.3734 62.6968 23.0181V18.5791C62.3894 18.2486 62.0127 17.9852 61.5627 17.7906L61.56 17.7892L61.5577 17.7882C61.1039 17.5739 60.5969 17.4652 60.0341 17.4652C59.4241 17.4652 58.8757 17.6109 58.3848 17.9005C57.8919 18.1911 57.5003 18.5886 57.2087 19.0957L57.208 19.0974C56.9192 19.5872 56.7728 20.1487 56.7728 20.7867C56.7728 21.4245 56.9189 21.9934 57.2087 22.4975C57.5001 23.0042 57.8917 23.4085 58.3848 23.7125L58.4775 23.765C58.9445 24.0195 59.4622 24.1478 60.0341 24.1478V24.3199L59.9151 24.3182C59.3626 24.3015 58.856 24.1674 58.3952 23.9162L58.2974 23.8607C57.8108 23.5613 57.4177 23.1683 57.1183 22.6817L57.0598 22.5832C56.7729 22.0842 56.6203 21.5266 56.6024 20.9107L56.6007 20.7867ZM62.8688 16.5943C62.4297 16.2616 61.9503 16.0087 61.4313 15.8357C60.9771 15.6844 60.5077 15.5992 60.023 15.5803L59.8146 15.5762C58.8564 15.5762 57.9845 15.8092 57.1993 16.275C56.4141 16.7408 55.7886 17.3664 55.3228 18.1515L55.2408 18.2998C54.843 19.0476 54.6442 19.8832 54.6442 20.8065C54.6442 21.7913 54.8703 22.6831 55.3228 23.4816C55.7752 24.2668 56.3943 24.892 57.1795 25.3578C57.9156 25.7945 58.7219 26.0266 59.5985 26.0539L59.7746 26.0566C60.9856 26.0566 62.0237 25.6774 62.8887 24.9188V25.8969H64.865V11.5439L62.8688 11.9234V16.5943Z"
      fill="#020617"
    />
    <path
      d="M47.1307 15.5638L47.1825 15.6327L49.66 18.9232L52.1374 15.6327L52.1892 15.5638H54.8781L50.994 20.6666L55.1181 26.069H52.3489L49.62 22.4306L46.8914 26.069H44.2032L48.2856 20.6868L44.5726 15.8407L44.3608 15.5638H47.1307ZM44.7094 15.7359L48.5021 20.6868L44.5497 25.8969H46.8054L49.62 22.1439L52.4349 25.8969H54.7702L50.7779 20.6666L54.5309 15.7359H52.2749L49.66 19.2096L47.045 15.7359H44.7094Z"
      fill="#020617"
    />
    <path
      d="M43.4957 26.069H41.1751V25.2788C40.3365 25.9117 39.3541 26.2286 38.2331 26.2287C37.2585 26.2287 36.363 25.9881 35.5503 25.506C34.7399 25.0253 34.0998 24.3783 33.6324 23.5673L33.6318 23.5663C33.1636 22.7401 32.9306 21.8188 32.9306 20.8065C32.9306 19.7942 33.1636 18.879 33.6324 18.0655L33.6334 18.0638C34.1139 17.2538 34.7602 16.6076 35.5701 16.1271C36.3832 15.6448 37.2856 15.4042 38.2731 15.4042C38.8501 15.4042 39.4074 15.4937 39.9443 15.6727C40.3747 15.8162 40.7781 16.0134 41.1553 16.2629V11.7809L43.4957 11.3362V26.069ZM35.0592 20.7867C35.0592 20.1629 35.1936 19.6033 35.4626 19.1081L35.5184 19.01C35.8053 18.5109 36.1857 18.1113 36.6598 17.8111L36.7559 17.7522C37.2749 17.4462 37.8538 17.2931 38.4926 17.2931L38.6019 17.2944C39.1445 17.3077 39.6404 17.4205 40.0895 17.6326C40.5819 17.8455 40.9947 18.1382 41.3274 18.5108V23.0823C40.9947 23.4816 40.5819 23.7876 40.0895 24.0006L39.9991 24.0392C39.5437 24.2263 39.0416 24.3199 38.4926 24.3199V24.1478C39.0569 24.1478 39.565 24.0453 40.0196 23.8433L40.0213 23.8426C40.4704 23.6484 40.8474 23.3734 41.1553 23.0181V18.5791C40.848 18.2486 40.4713 17.9852 40.0213 17.7906L40.0186 17.7892L40.0162 17.7882C39.5624 17.5739 39.0555 17.4652 38.4926 17.4652C37.8827 17.4652 37.3342 17.6109 36.8433 17.9005C36.3504 18.1911 35.9588 18.5886 35.6673 19.0957L35.6666 19.0974C35.3777 19.5872 35.2313 20.1487 35.2313 20.7867C35.2313 21.4245 35.3774 21.9934 35.6673 22.4975C35.9586 23.0042 36.3502 23.4085 36.8433 23.7125L36.9361 23.765C37.4031 24.0195 37.9208 24.1478 38.4926 24.1478V24.3199L38.3736 24.3182C37.8211 24.3015 37.3145 24.1674 36.8537 23.9162L36.7559 23.8607C36.2693 23.5613 35.8763 23.1683 35.5768 22.6817L35.5184 22.5832C35.2314 22.0842 35.0789 21.5266 35.0609 20.9107L35.0592 20.7867ZM41.3274 16.5943C40.8882 16.2616 40.4089 16.0087 39.8898 15.8357C39.4357 15.6844 38.9662 15.5992 38.4815 15.5803L38.2731 15.5762C37.3149 15.5762 36.443 15.8092 35.6579 16.275C34.8727 16.7408 34.2471 17.3664 33.7813 18.1515L33.6993 18.2998C33.3016 19.0476 33.1027 19.8832 33.1027 20.8065C33.1027 21.7913 33.3289 22.6831 33.7813 23.4816C34.2338 24.2668 34.8529 24.892 35.638 25.3578C36.3742 25.7945 37.1805 26.0266 38.057 26.0539L38.2331 26.0566C39.4442 26.0566 40.4822 25.6774 41.3472 24.9188V25.8969H43.3236V11.5439L41.3274 11.9234V16.5943Z"
      fill="#020617"
    />
    <path
      d="M9.97823 9.97819C9.97823 9.97819 15.5659 15.1586 19.9565 15.1586C24.3471 15.1586 29.9347 9.97819 29.9347 9.97819C29.9347 9.97819 24.7543 15.5658 24.7543 19.9564C24.7543 24.347 29.9347 29.9347 29.9347 29.9347C29.9347 29.9347 24.3471 24.7543 19.9565 24.7543C15.5659 24.7543 9.97823 29.9347 9.97823 29.9347C9.97823 29.9347 15.1586 24.347 15.1586 19.9564C15.1586 15.5658 9.97823 9.97819 9.97823 9.97819Z"
      fill="#020617"
    />
  </svg>
{/snippet}

{#snippet googleIcon()}
  <svg
    xmlns="http://www.w3.org/2000/svg"
    preserveAspectRatio="xMidYMid"
    viewBox="0 0 256 262"
    width="16"
    height="16"
  >
    <path
      fill="#4285F4"
      d="M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027"
    />
    <path
      fill="#34A853"
      d="M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1"
    />
    <path
      fill="#FBBC05"
      d="M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782"
    />
    <path
      fill="#EB4335"
      d="M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251"
    />
  </svg>
{/snippet}
